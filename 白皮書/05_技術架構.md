# 1. æ•´é«”æ¶æ§‹æ¦‚è¦½

## ğŸ—ï¸ åˆ†å±¤æ¶æ§‹è¨­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ¶ç•Œé¢å±¤ (UI Layer)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   éŠæˆ²é‚è¼¯å±¤ (Game Logic)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  APIç¶²é—œå±¤ (API Gateway)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 æ¥­å‹™æœå‹™å±¤ (Business Services)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                å€å¡ŠéˆæŠ½è±¡å±¤ (Blockchain Abstraction)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ™ºèƒ½åˆç´„å±¤ (Smart Contract Layer)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 å€å¡ŠéˆåŸºç¤å±¤ (Blockchain Base)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æ ¸å¿ƒæŠ€è¡“æ£§

| æŠ€è¡“çµ„ä»¶ | é¸å‹æ–¹æ¡ˆ | ç‰ˆæœ¬ | ç”¨é€”èªªæ˜ |
|----------|----------|------|----------|
| ä¸»éˆ | BSC | 2.0 | ä¸»è¦æ™ºèƒ½åˆç´„éƒ¨ç½² |
| å´éˆ | Polygon | PoS | éŠæˆ²äº¤äº’å’Œå¾®äº¤æ˜“ |
| Layer2 | Arbitrum | One | é™ä½Gasè²»ç”¨ |
| å­˜å„² | IPFS | Latest | NFTå…ƒæ•¸æ“šå­˜å„² |
| é è¨€æ©Ÿ | Chainlink | VRF v2 | éš¨æ©Ÿæ•¸å’Œåƒ¹æ ¼æ•¸æ“š |
| å¾Œç«¯ | Node.js | 18.x | éŠæˆ²æœå‹™å™¨ |
| æ•¸æ“šåº« | MongoDB | 6.0 | éŠæˆ²æ•¸æ“šå­˜å„² |
| ç·©å­˜ | Redis | 7.0 | å¯¦æ™‚æ•¸æ“šç·©å­˜ |
| å‰ç«¯ | React | 18.x | Webæ‡‰ç”¨ç•Œé¢ |
| ç§»å‹•ç«¯ | React Native | 0.72 | ç§»å‹•æ‡‰ç”¨ |

# 2. æ™ºèƒ½åˆç´„æ¶æ§‹

## ğŸ“œ åˆç´„é«”ç³»è¨­è¨ˆ

### æ ¸å¿ƒåˆç´„æ¨¡å¡Š
```solidity
// ä¸»åˆç´„æ¶æ§‹
MythoriaCore.sol           // æ ¸å¿ƒå”è­°åˆç´„
â”œâ”€â”€ NodeManager.sol        // ç¯€é»ç®¡ç†åˆç´„
â”œâ”€â”€ TokenManager.sol       // ä»£å¹£ç®¡ç†åˆç´„
â”œâ”€â”€ NFTHeroSystem.sol      // NFTè‹±é›„ç³»çµ±
â”œâ”€â”€ GameLogic.sol          // éŠæˆ²é‚è¼¯åˆç´„
â”œâ”€â”€ StakingPool.sol        // è³ªæŠ¼æ± åˆç´„
â”œâ”€â”€ RewardDistributor.sol  // çå‹µåˆ†é…åˆç´„
â””â”€â”€ GovernanceDAO.sol      // æ²»ç†DAOåˆç´„
```

### æ™ºèƒ½åˆç´„è©³ç´°è¦ç¯„

#### 1. MythoriaCore.sol - æ ¸å¿ƒå”è­°åˆç´„
```solidity
pragma solidity ^0.8.19;

contract MythoriaCore {
    // ç‹€æ…‹è®Šé‡
    mapping(address => UserProfile) public users;
    mapping(uint256 => NodeInfo) public nodes;
    
    // æ ¸å¿ƒåŠŸèƒ½
    function initialize() external;
    function upgradeProtocol(bytes calldata data) external;
    function emergencyPause() external;
    function setOracleAddress(address oracle) external;
    
    // äº‹ä»¶å®šç¾©
    event UserRegistered(address indexed user, uint256 timestamp);
    event ProtocolUpgraded(uint256 version, bytes32 hash);
    event EmergencyActivated(address indexed admin, string reason);
}
```

#### 2. NFTHeroSystem.sol - NFTè‹±é›„ç³»çµ±
```solidity
contract NFTHeroSystem is ERC721, AccessControl {
    struct Hero {
        uint256 tokenId;
        uint8 rarity;        // N=1, R=2, SR=3, SSR=4, UR=5
        uint8 level;         // 1-80
        uint8 stars;         // 1-7
        uint8 breakthrough;  // 0-8
        uint16 charm;        // é­…åŠ›å€¼
        uint32 experience;   // ç¶“é©—å€¼
        uint32 fatigue;      // ç–²å‹å€¼
        bytes32 attributes;  // å±¬æ€§æ•¸æ“š
    }
    
    mapping(uint256 => Hero) public heroes;
    mapping(address => uint256[]) public userHeroes;
    
    function mintHero(address to, uint8 rarity) external returns (uint256);
    function upgradeHero(uint256 tokenId, uint32 exp) external;
    function addFatigue(uint256 tokenId, uint32 amount) external;
    function recoverFatigue(uint256 tokenId, uint32 amount) external;
}
```

#### 3. StakingPool.sol - è³ªæŠ¼æ± åˆç´„
```solidity
contract StakingPool {
    struct StakeInfo {
        uint256 amount;      // è³ªæŠ¼æ•¸é‡
        uint256 timestamp;   // è³ªæŠ¼æ™‚é–“
        uint256 lockPeriod;  // é–å®šæœŸ
        uint256 rewardDebt;  // çå‹µå‚µå‹™
    }
    
    mapping(address => StakeInfo) public stakes;
    
    function stake(uint256 amount, uint256 lockPeriod) external;
    function unstake(uint256 amount) external;
    function claimRewards() external returns (uint256);
    function getRewardRate() external view returns (uint256);
}
```

## ğŸ” å®‰å…¨æ©Ÿåˆ¶è¨­è¨ˆ

### å¤šé‡å®‰å…¨ä¿éšœ
1. **è¨ªå•æ§åˆ¶**ï¼šåŸºæ–¼OpenZeppelinçš„AccessControl
2. **é‡å…¥æ”»æ“Šé˜²è­·**ï¼šReentrancyGuardä¿è­·
3. **æ•´æ•¸æº¢å‡ºé˜²è­·**ï¼šSafeMathåº«ä½¿ç”¨
4. **æš«åœæ©Ÿåˆ¶**ï¼šç·Šæ€¥æƒ…æ³ä¸‹çš„åˆç´„æš«åœ
5. **å¤šç°½éŒ¢åŒ…**ï¼šé—œéµæ“ä½œéœ€è¦å¤šé‡ç°½å

### åˆç´„å‡ç´šç­–ç•¥
```solidity
// ä»£ç†åˆç´„æ¨¡å¼
contract MythoriaProxy {
    address public implementation;
    address public admin;
    
    modifier onlyAdmin() {
        require(msg.sender == admin, "Only admin");
        _;
    }
    
    function upgrade(address newImplementation) external onlyAdmin {
        implementation = newImplementation;
        emit Upgraded(newImplementation);
    }
}
```

# 3. AIæ™ºèƒ½ç³»çµ±

## ğŸ¤– Oracleæ™ºæ…§ä¹‹çœ¼æ¶æ§‹

### AIç³»çµ±çµ„ä»¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AI Oracle System               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Collection  â”‚  Analysis Engine       â”‚
â”‚  â”œâ”€ Price Feed    â”‚  â”œâ”€ Economic Model     â”‚
â”‚  â”œâ”€ User Behavior â”‚  â”œâ”€ Risk Assessment    â”‚
â”‚  â”œâ”€ Game Metrics  â”‚  â”œâ”€ Reward Optimizer   â”‚
â”‚  â””â”€ Market Data   â”‚  â””â”€ Prediction Model   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Decision Making Engine            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Execution Interface              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ™ºèƒ½èª¿æ§ç®—æ³•
```python
class EconomicOracle:
    def __init__(self):
        self.price_model = PriceStabilityModel()
        self.reward_optimizer = RewardOptimizer()
        self.risk_assessor = RiskAssessment()
    
    def analyze_market_conditions(self):
        """åˆ†æå¸‚å ´ç‹€æ³"""
        price_volatility = self.get_price_volatility()
        trading_volume = self.get_trading_volume()
        user_activity = self.get_user_activity()
        
        return {
            'stability_score': self.calculate_stability(price_volatility),
            'liquidity_score': self.calculate_liquidity(trading_volume),
            'engagement_score': self.calculate_engagement(user_activity)
        }
    
    def adjust_parameters(self, market_data):
        """å‹•æ…‹èª¿æ•´åƒæ•¸"""
        if market_data['stability_score'] < 0.7:
            self.trigger_stability_mechanism()
        
        if market_data['liquidity_score'] < 0.6:
            self.increase_liquidity_incentives()
        
        return self.generate_adjustment_proposal()
```

### å¯¦æ™‚ç›£æ§æŒ‡æ¨™
| ç›£æ§æŒ‡æ¨™ | æ›´æ–°é »ç‡ | é–¾å€¼è¨­å®š | éŸ¿æ‡‰æ©Ÿåˆ¶ |
|----------|----------|----------|----------|
| MYRåƒ¹æ ¼æ³¢å‹• | 1åˆ†é˜ | Â±15% | è‡ªå‹•ç©©å®šæ©Ÿåˆ¶ |
| äº¤æ˜“é‡ç•°å¸¸ | 5åˆ†é˜ | Â±50% | æµå‹•æ€§èª¿ç¯€ |
| ç”¨æˆ¶æ´»èºåº¦ | 1å°æ™‚ | -30% | æ¿€å‹µæ©Ÿåˆ¶å•Ÿå‹• |
| ç¯€é»æ”¶ç›Šç‡ | 1å¤© | Â±20% | åˆ†ç´…æ¯”ä¾‹èª¿æ•´ |
| Gasè²»ç”¨ | å¯¦æ™‚ | >50 Gwei | Layer2åˆ‡æ› |

# 4. è·¨éˆæŠ€è¡“æ–¹æ¡ˆ

## ğŸŒ‰ å¤šéˆéƒ¨ç½²æ¶æ§‹

### éˆé–“è³‡ç”¢æ©‹æ¥
```solidity
contract MythoriaBridge {
    mapping(uint256 => ChainInfo) public supportedChains;
    mapping(bytes32 => BridgeTransaction) public transactions;
    
    struct BridgeTransaction {
        address sender;
        address receiver;
        uint256 amount;
        uint256 sourceChain;
        uint256 targetChain;
        uint8 status; // 0: pending, 1: confirmed, 2: failed
    }
    
    function bridgeTokens(
        uint256 amount,
        uint256 targetChain,
        address receiver
    ) external payable {
        require(supportedChains[targetChain].active, "Chain not supported");
        
        // é–å®šæºéˆä»£å¹£
        _lockTokens(msg.sender, amount);
        
        // ç”Ÿæˆè·¨éˆäº¤æ˜“
        bytes32 txHash = _generateTxHash(msg.sender, receiver, amount, targetChain);
        transactions[txHash] = BridgeTransaction({
            sender: msg.sender,
            receiver: receiver,
            amount: amount,
            sourceChain: block.chainid,
            targetChain: targetChain,
            status: 0
        });
        
        emit BridgeInitiated(txHash, msg.sender, receiver, amount, targetChain);
    }
}
```

### æ”¯æŒçš„å€å¡Šéˆç¶²çµ¡
| ç¶²çµ¡åç¨± | ç¶²çµ¡ID | ç”¨é€” | Gasè²»ç”¨ | ç¢ºèªæ™‚é–“ |
|----------|--------|------|---------|----------|
| Ethereum | 1 | ä¸»è¦è³‡ç”¢å­˜å„² | é«˜ | 1-5åˆ†é˜ |
| Polygon | 137 | éŠæˆ²äº¤äº’ | æ¥µä½ | 2-5ç§’ |
| Arbitrum | 42161 | è¤‡é›œè¨ˆç®— | ä½ | 10-30ç§’ |
| BSC | 56 | äºæ´²å¸‚å ´ | ä½ | 3-5ç§’ |
| Avalanche | 43114 | é«˜é »äº¤æ˜“ | ä½ | 1-3ç§’ |

# 5. æ•¸æ“šå­˜å„²èˆ‡ç®¡ç†

## ğŸ’¾ åˆ†ä½ˆå¼å­˜å„²æ¶æ§‹

### æ•¸æ“šåˆ†å±¤å­˜å„²
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Hot Data (Redis)               â”‚
â”‚           å¯¦æ™‚éŠæˆ²æ•¸æ“šã€ç·©å­˜æ•¸æ“š               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             Warm Data (MongoDB)             â”‚
â”‚          ç”¨æˆ¶æ•¸æ“šã€éŠæˆ²è¨˜éŒ„ã€çµ±è¨ˆæ•¸æ“š           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             Cold Data (IPFS)                â”‚
â”‚        NFTå…ƒæ•¸æ“šã€åœ–ç‰‡è³‡æºã€æ­·å²æ•¸æ“š          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Archive Data (Arweave)            â”‚
â”‚            æ°¸ä¹…å­˜å„²ã€åˆç´„ä»£ç¢¼å‚™ä»½              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### NFTå…ƒæ•¸æ“šæ¨™æº–
```json
{
  "name": "Zeus - King of Gods",
  "description": "The mighty ruler of Olympus, wielder of thunder and lightning.",
  "image": "ipfs://QmYx8K9nNbxKiGHJgdc4R7oQjGGFnfBZuMrMqEA4nNbxKi",
  "attributes": [
    {
      "trait_type": "Rarity",
      "value": "UR+"
    },
    {
      "trait_type": "Element",
      "value": "Lightning"
    },
    {
      "trait_type": "Level",
      "value": 80
    },
    {
      "trait_type": "Stars",
      "value": 7
    },
    {
      "trait_type": "Attack Power",
      "value": 9500
    },
    {
      "trait_type": "Defense",
      "value": 8200
    },
    {
      "trait_type": "Health Points",
      "value": 15000
    },
    {
      "trait_type": "Speed",
      "value": 7800
    }
  ],
  "properties": {
    "mythology": "Greek",
    "class": "Warrior",
    "generation": 1,
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

## ğŸ”„ æ•¸æ“šåŒæ­¥æ©Ÿåˆ¶

### éˆä¸Šéˆä¸‹æ•¸æ“šä¸€è‡´æ€§
```javascript
class DataSyncManager {
    constructor() {
        this.blockchain = new BlockchainConnector();
        this.database = new DatabaseConnector();
        this.eventListener = new EventListener();
    }
    
    async syncHeroData(tokenId) {
        try {
            // å¾å€å¡Šéˆç²å–æœ€æ–°æ•¸æ“š
            const onChainData = await this.blockchain.getHeroData(tokenId);
            
            // æ›´æ–°æœ¬åœ°æ•¸æ“šåº«
            await this.database.updateHero(tokenId, onChainData);
            
            // è§¸ç™¼å‰ç«¯æ›´æ–°
            this.eventListener.emit('heroUpdated', { tokenId, data: onChainData });
            
        } catch (error) {
            console.error('Data sync failed:', error);
            // éŒ¯èª¤è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶
            this.scheduleRetry(tokenId);
        }
    }
}
```

# 6. å®‰å…¨èˆ‡å¯©è¨ˆ

## ğŸ›¡ï¸ å¤šå±¤å®‰å…¨é˜²è­·

### æ™ºèƒ½åˆç´„å®‰å…¨
1. **ä»£ç¢¼å¯©è¨ˆ**ï¼š
   - Certikå¯©è¨ˆèªè­‰
   - OpenZeppelinå®‰å…¨æ¨™æº–
   - ç¤¾å€ä»£ç¢¼å¯©æŸ¥

2. **é‹è¡Œæ™‚ä¿è­·**ï¼š
   - é‡å…¥æ”»æ“Šé˜²è­·
   - æ•´æ•¸æº¢å‡ºæª¢æŸ¥
   - è¨ªå•æ¬Šé™æ§åˆ¶

3. **å‡ç´šå®‰å…¨**ï¼š
   - æ™‚é–“é–æ©Ÿåˆ¶
   - å¤šé‡ç°½åé©—è­‰
   - ç¤¾å€æ²»ç†æŠ•ç¥¨

### ç³»çµ±å®‰å…¨æ¶æ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WAFé˜²è­·                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              è² è¼‰å‡è¡¡å™¨ (Nginx)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            APIç¶²é—œ (Rate Limiting)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æ‡‰ç”¨æœå‹™å™¨ (Node.js Cluster)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            æ•¸æ“šåº«é›†ç¾¤ (MongoDB)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              å€å¡Šéˆç¯€é»é›†ç¾¤                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¢¨éšªæ§åˆ¶æ©Ÿåˆ¶
| é¢¨éšªé¡å‹ | æª¢æ¸¬æ–¹æ³• | éŸ¿æ‡‰æªæ–½ | æ¢å¾©æ™‚é–“ |
|----------|----------|----------|----------|
| æ™ºèƒ½åˆç´„æ¼æ´ | è‡ªå‹•åŒ–æƒæ | ç·Šæ€¥æš«åœ | 24å°æ™‚ |
| ç•°å¸¸äº¤æ˜“ | å¯¦æ™‚ç›£æ§ | äº¤æ˜“å‡çµ | 1å°æ™‚ |
| DDoSæ”»æ“Š | æµé‡åˆ†æ | é™æµé˜²è­· | å¯¦æ™‚ |
| æ•¸æ“šæ´©éœ² | è¨ªå•å¯©è¨ˆ | æ¬Šé™å›æ”¶ | 30åˆ†é˜ |
| åƒ¹æ ¼æ“ç¸± | åƒ¹æ ¼ç›£æ§ | äº¤æ˜“é™åˆ¶ | 15åˆ†é˜ |

# 7. æ€§èƒ½å„ªåŒ–

## âš¡ é«˜æ€§èƒ½æ¶æ§‹è¨­è¨ˆ

### ç·©å­˜ç­–ç•¥
```javascript
// Redisç·©å­˜å±¤è¨­è¨ˆ
const cacheConfig = {
    // ç”¨æˆ¶æ•¸æ“šç·©å­˜
    userData: {
        ttl: 3600, // 1å°æ™‚
        pattern: 'user:*'
    },
    
    // éŠæˆ²ç‹€æ…‹ç·©å­˜
    gameState: {
        ttl: 300, // 5åˆ†é˜
        pattern: 'game:*'
    },
    
    // NFTæ•¸æ“šç·©å­˜
    nftData: {
        ttl: 86400, // 24å°æ™‚
        pattern: 'nft:*'
    },
    
    // åƒ¹æ ¼æ•¸æ“šç·©å­˜
    priceData: {
        ttl: 60, // 1åˆ†é˜
        pattern: 'price:*'
    }
};
```

### æ•¸æ“šåº«å„ªåŒ–
```javascript
// MongoDBç´¢å¼•å„ªåŒ–
db.users.createIndex({ "address": 1 }, { unique: true });
db.heroes.createIndex({ "owner": 1, "tokenId": 1 });
db.transactions.createIndex({ "timestamp": -1, "type": 1 });
db.battles.createIndex({ "player": 1, "createdAt": -1 });

// åˆ†ç‰‡ç­–ç•¥
sh.shardCollection("mythoria.transactions", { "timestamp": 1 });
sh.shardCollection("mythoria.battles", { "player": "hashed" });
```

### è² è¼‰å‡è¡¡é…ç½®
```nginx
upstream mythoria_backend {
    server 10.0.1.10:3000 weight=3;
    server 10.0.1.11:3000 weight=3;
    server 10.0.1.12:3000 weight=2;
    server 10.0.1.13:3000 backup;
}

server {
    listen 443 ssl http2;
    server_name api.mythoria.game;
    
    location / {
        proxy_pass http://mythoria_backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_cache mythoria_cache;
        proxy_cache_valid 200 5m;
    }
}
```

# 8. é–‹ç™¼èˆ‡éƒ¨ç½²

## ğŸš€ CI/CDæµæ°´ç·š

### è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹
```yaml
# GitHub Actionsé…ç½®
name: Mythoria Deploy Pipeline

on:
  push:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Smart Contract Tests
        run: |
          npm install
          npx hardhat test
          npx hardhat coverage
      
  security-scan:
    runs-on: ubuntu-latest
    steps:
      - name: Slither Analysis
        run: slither contracts/
      - name: MythX Security Scan
        run: mythx analyze contracts/
  
  deploy:
    needs: [test, security-scan]
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Testnet
        run: npx hardhat deploy --network goerli
      - name: Verify Contracts
        run: npx hardhat verify --network goerli
```

### ç’°å¢ƒé…ç½®ç®¡ç†
```javascript
// ç’°å¢ƒé…ç½®
const config = {
    development: {
        blockchain: {
            network: 'localhost',
            gasPrice: '20000000000',
            gasLimit: '8000000'
        },
        database: {
            url: 'mongodb://localhost:27017/mythoria_dev'
        }
    },
    
    testnet: {
        blockchain: {
            network: 'goerli',
            gasPrice: '30000000000',
            gasLimit: '10000000'
        },
        database: {
            url: process.env.MONGODB_TESTNET_URL
        }
    },
    
    mainnet: {
        blockchain: {
            network: 'mainnet',
            gasPrice: 'auto',
            gasLimit: '12000000'
        },
        database: {
            url: process.env.MONGODB_MAINNET_URL
        }
    }
};
```

# 9. ç›£æ§èˆ‡é‹ç¶­

## ğŸ“Š å¯¦æ™‚ç›£æ§ç³»çµ±

### é—œéµæŒ‡æ¨™ç›£æ§
```javascript
// Prometheusç›£æ§æŒ‡æ¨™
const metrics = {
    // ç³»çµ±æ€§èƒ½æŒ‡æ¨™
    system: {
        cpu_usage: new prometheus.Gauge({
            name: 'mythoria_cpu_usage',
            help: 'CPU usage percentage'
        }),
        memory_usage: new prometheus.Gauge({
            name: 'mythoria_memory_usage', 
            help: 'Memory usage in bytes'
        })
    },
    
    // æ¥­å‹™æŒ‡æ¨™
    business: {
        active_users: new prometheus.Gauge({
            name: 'mythoria_active_users',
            help: 'Number of active users'
        }),
        transactions_per_second: new prometheus.Gauge({
            name: 'mythoria_tps',
            help: 'Transactions per second'
        })
    }
};
```

### å‘Šè­¦è¦å‰‡é…ç½®
```yaml
# Alertmanagerè¦å‰‡
groups:
- name: mythoria.rules
  rules:
  - alert: HighCPUUsage
    expr: mythoria_cpu_usage > 80
    for: 5m
    annotations:
      summary: "High CPU usage detected"
      
  - alert: LowActiveUsers
    expr: mythoria_active_users < 1000
    for: 10m
    annotations:
      summary: "Active users below threshold"
      
  - alert: ContractError
    expr: mythoria_contract_errors > 10
    for: 1m
    annotations:
      summary: "Smart contract errors detected"
```
